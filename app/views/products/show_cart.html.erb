<h2 class="text-gray-900 my-5 font-sans text-center font-bold text-4xl">
  Cart
</h2>
<% if @cart_items.count > 0 %>
  <div class="relative rounded-lg mb-4">
    <table class="min-w-[400px] mx-auto text-sm text-left text-gray-400">
      <thead class="text-xs uppercase bg-gray-700 text-gray-400">
        <tr>
          <th scope="col" class="px-6 py-3">Product name</th>
          <th scope="col" class="px-6 py-3">Amount</th>
          <th scope="col" class="px-6 py-3">Total price</th>
          <th scope="col" class="px-6 py-3">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @cart_items.each do |product, amount| %>
          <tr class="border-b bg-gray-900 border-gray-700">
            <th scope="row" class="px-6 py-4 font-medium whitespace-nowrap text-gray-400">
              <%= product&.name %>
            </th>
            <td class="px-6 py-4">
              <%= amount %>
            </td>
            <td class="px-6 py-4">
              <%= number_to_currency(product&.price && product.price * amount) %>
            </td>
            <td class="px-6 py-4 flex justify-between items-center">
              <%= form_with(url: update_amount_path(product), class: "mr-[5px]", method: :post) do |f| %>
                  <%= f.number_field :amount, min: 1, value: amount, class: "h-[30px] w-[65px] bg-transparent rounded-lg" %>
                  <%= f.submit 'Update', class: "text-white bg-green-700 hover:bg-green-800 font-medium rounded-lg text-sm px-[10px] py-[5px] mx-2" %>
              <% end %>
              <%= button_to "x",remove_from_cart_path(product), method: :post, class: "text-white bg-red-700 hover:bg-red-800 font-medium rounded-lg text-sm px-[10px] py-[5px] mr-2" %>
            </td>
          </tr>
        <% end %>
      </tbody>
      <tfoot>
        <tr class="font-semibold text-white bg-gray-900">
          <th scope="row" class="px-6 py-3 text-base">Total</th>
          <td class="px-6 py-3">
            <%= cart_items_size %>
          </td>
          <td class="px-6 py-3">
            <%= number_to_currency(product_total_sum) %>
          </td>
          <td class="px-6 py-3 flex justify-end">
            <%= link_to "Order", new_order_path, class: "text-white block w-[50%] text-center bg-green-700 hover:bg-green-800 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2" %>
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
<% else %>
  <div class="p-4 mb-4 text-sm text-center rounded-lg bg-gray-800 text-white w-[200px] mx-auto mt-[10%]">
    Your Cart is empty
  </div>
<% end %>
